<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>测试1 | 战</title>
<meta name="description" content="温故而知新" />
<link rel="shortcut icon" href="https://artcodelcy.github.io//favicon.ico?v=1567087948676">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://artcodelcy.github.io//styles/main.css">

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://artcodelcy.github.io/">
  <img class="avatar" src="https://artcodelcy.github.io//images/avatar.png?v=1567087948676" alt="">
  </a>
  <h1 class="site-title">
    战
  </h1>
  <p class="site-description">
    温故而知新
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          首页
        </a>
      
    
      
        <a href="/archives" class="menu">
          归档
        </a>
      
    
      
        <a href="/tags" class="menu">
          标签
        </a>
      
    
      
        <a href="/post/about" class="menu">
          关于
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              测试1
            </h2>
            <div class="post-info">
              <span>
                2019-08-29
              </span>
              <span>
                1 min read
              </span>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <h2 id="开发之前">开发之前：</h2>
<ul>
<li>技术选型</li>
<li>框架单间</li>
<li>maven搭建</li>
<li>GitLab搭建</li>
</ul>
<p>架构图：</p>
<p><img src="038A46425D174F4280B3A6A78B0749D8" alt="1561047128(1)"></p>
<p>注意：</p>
<ul>
<li>一般 前端 到lvs+keepLived 中间还有个防火墙</li>
<li>SOA数据库会存在共享，微服务提倡每个服务连接独立的数据库。</li>
</ul>
<hr>
<h3 id="构建项目">构建项目</h3>
<p>1.分布式基础设施：</p>
<ul>
<li>注册中心</li>
<li>配置中心</li>
<li>网关</li>
<li>任务调度平台</li>
<li>分布式事务解决框架</li>
<li>分布式调用链</li>
</ul>
<ol start="2">
<li>公共接口:</li>
</ol>
<ul>
<li>微信服务接口</li>
<li>会员服务接口</li>
<li>SSO服务接口</li>
<li>商品服务接口</li>
<li>搜索服务接口</li>
<li>聚合服务接口</li>
<li>订单服务接口</li>
<li>秒杀服务接口</li>
</ul>
<ol start="2">
<li>公共接口实现类:</li>
<li>工具类:</li>
</ol>
<h5 id="步骤作为架构师要独立完成搭建项目">步骤：【作为架构师要独立完成搭建项目】</h5>
<p>1.首先构建Parent【pom】</p>
<p>2.然后继续构建子类项目</p>
<p><strong>注意</strong>：</p>
<ul>
<li>接口统一采用@GetMapping @RequestMapping 实现接口映射。这是为了swagger！</li>
<li>如果采用@RequestMapping buzho那么 swagger会把所有类型都搞出来了</li>
<li>接口---&gt; 实现(@RestController)</li>
<li>写一个接口 然后写个实现为了Feign客户端可以被复用</li>
<li>微服务项目如何统一管理Swagger文档</li>
<li>必须要通过网关！【原理】:每个服务里面单独集成swagger</li>
<li>集成步骤： 在网关和服务（Api）加入依赖jar包 每个服务的启动类都加入@EnableSwagger2Doc</li>
</ul>
<hr>
<h3 id="企业级maven私服环境">企业级maven私服环境</h3>
<ul>
<li>引入接口jar包，发布到私服【别人引用】</li>
<li>拿不到源码，拿到jar包</li>
<li>原理：<br>
管理微服务接口RPC通讯。 微服务采用分布式开发模式，生产者将自己的接口发布到maven私服仓库中，消费者直接冲私服仓库中下载对应的服务接口即可。实现微服务中的消费者和生产者通讯。（底层转成http通讯去调用远程服务）</li>
</ul>
<h4 id="步骤">步骤</h4>
<p>1.基于Docker构建GitLab<br>
2.将代码导入GitLab中<br>
3.GitLab分配账号权限<br>
4.构建微服务网关实现反向代理<br>
5.使用微服务网关整合Swagger2</p>
<p><strong>打包</strong>：</p>
<pre><code>在私服创建用户，密码、相应的maven仓库地址 
然后maven settings.xml文件，找到server 这个输入账号密码。
pom文件中引入 名字 地址 和build依赖表示可以发布jar包，引入这个插件

-----
进入中断，输入命令并且将其打入到maven仓库中去： mvn deploy
</code></pre>
<ul>
<li>此时可以通过图形化界面看到了打入的jar包</li>
</ul>
<p><strong>下载</strong>：</p>
<pre><code>重新建立一个maven项目，pom中引入私服的 名字 地址（也可以设置到settings.xml）
会自动去私服下载对应的jar包
</code></pre>
<p><strong>备注：</strong></p>
<pre><code>如何知道一个文件是否改变了呢？ 当然是比较文件的hash值，文件hash又叫文件签名，文件中哪怕一个bit位改变了，文件hash就会不同。比较常用的文件hash算法有MD5和SHA-1 
</code></pre>
<p><strong>结果：</strong><br>
某个服务的api jar包大到私服， 别的服务以来这个jar，然后获取到并且进行远程服务的调用。中间走http远程服务调用</p>
<h4 id="gitlab的搭建">GitLab的搭建</h4>
<ul>
<li>GitLab是一个用于仓库管理系统的开源项目，使用git作为代码管理工具，并在此基础上搭建起来web服务。</li>
<li>基于docker安装GitLab环境</li>
<li>开发人员小明去注册 然后架构师给分配权限这样小明就可以Git clone了</li>
</ul>
<p><strong>注意发布时候:</strong> pom要改成release版本，因为私服只接受这个版本。</p>
<hr>
<h3 id="知识点总结">知识点总结:</h3>
<ol>
<li>技术选型、服务划分、有哪些模块</li>
<li>为什么使用网关？</li>
</ol>
<ul>
<li>服务分发</li>
<li>统一管理微服务请求</li>
<li>可以实现负载均衡、权限控制、路由转发、监控等。</li>
</ul>
<p>3.为啥使用XXL-Job？</p>
<ul>
<li>方便统一管理集群Job</li>
</ul>
<ol start="4">
<li>一般 前端 到lvs+keepLived 中间还有个防火墙</li>
</ol>
<hr>
<ul>
<li>发布到私服上面: mvm deploy<br>
pom的版本要改成release版本，因为mavn私服就是这么设置的，拒绝别的版本</li>
</ul>
<p><strong>注意</strong>： Api模块是需要发布到私服上面的</p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E5%BC%80%E5%8F%91%E4%B9%8B%E5%89%8D">开发之前：</a>
<ul>
<li><a href="#%E6%9E%84%E5%BB%BA%E9%A1%B9%E7%9B%AE">构建项目</a><br>
*
<ul>
<li><a href="#%E6%AD%A5%E9%AA%A4%E4%BD%9C%E4%B8%BA%E6%9E%B6%E6%9E%84%E5%B8%88%E8%A6%81%E7%8B%AC%E7%AB%8B%E5%AE%8C%E6%88%90%E6%90%AD%E5%BB%BA%E9%A1%B9%E7%9B%AE">步骤：【作为架构师要独立完成搭建项目】</a></li>
</ul>
</li>
<li><a href="#%E4%BC%81%E4%B8%9A%E7%BA%A7maven%E7%A7%81%E6%9C%8D%E7%8E%AF%E5%A2%83">企业级maven私服环境</a>
<ul>
<li><a href="#%E6%AD%A5%E9%AA%A4">步骤</a></li>
<li><a href="#gitlab%E7%9A%84%E6%90%AD%E5%BB%BA">GitLab的搭建</a></li>
</ul>
</li>
<li><a href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93">知识点总结:</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="https://artcodelcy.github.io//post/redis-shu-ju-lei-xing">
              <h3 class="post-title">
                Redis数据类型
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | 
  <a class="rss" href="https://artcodelcy.github.io//atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()

  let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

  // This should probably be throttled.
  // Especially because it triggers during smooth scrolling.
  // https://lodash.com/docs/4.17.10#throttle
  // You could do like...
  // window.addEventListener("scroll", () => {
  //    _.throttle(doThatStuff, 100);
  // });
  // Only not doing it here to keep this Pen dependency-free.

  window.addEventListener("scroll", event => {
    let fromTop = window.scrollY;

    mainNavLinks.forEach((link, index) => {
      let section = document.getElementById(decodeURI(link.hash).substring(1));
      let nextSection = null
      if (mainNavLinks[index + 1]) {
        nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
      }
      console.log('section.offsetHeight', section.offsetHeight);
      if (section.offsetTop <= fromTop) {
        if (nextSection) {
          if (nextSection.offsetTop > fromTop) {
            link.classList.add("current");
          } else {
            link.classList.remove("current");    
          }
        } else {
          link.classList.add("current");
        }
      } else {
        link.classList.remove("current");
      }
    });
  });

</script>

      </div>
    </div>
  </body>
</html>
